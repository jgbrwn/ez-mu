{% if error %}
<div style="padding: 12px; background: rgba(239, 68, 68, 0.1); border: 1px solid var(--error); border-radius: 8px; color: var(--error); font-size: 13px;">
    {{ error }}
</div>
{% elseif playlist %}
<div style="padding: 16px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
    {% if watched_result and watched_result.success %}
    <div style="padding: 10px 12px; background: rgba(29, 185, 84, 0.1); border-radius: 6px; color: var(--success); font-size: 13px; margin-bottom: 12px;">
        üëÅÔ∏è Added to <a href="/watched/{{ watched_result.playlist_id }}" style="color: var(--primary);">Watched Playlists</a>.<br>
        <span style="font-size: 12px; opacity: 0.9;">After import completes, click "Refresh" on the watched playlist to sync track statuses.</span>
    </div>
    {% elseif watched_result and not watched_result.success %}
    <div style="padding: 10px 12px; background: rgba(234, 179, 8, 0.1); border-radius: 6px; color: #eab308; font-size: 13px; margin-bottom: 12px;">
        ‚ö†Ô∏è Could not add to watched: {{ watched_result.error }}
    </div>
    {% endif %}
    {% if playlist.warning %}
    <div style="padding: 8px 12px; background: rgba(234, 179, 8, 0.1); border: 1px solid #eab308; border-radius: 6px; color: #eab308; font-size: 12px; margin-bottom: 12px;">
        ‚ö†Ô∏è {{ playlist.warning }}
    </div>
    {% endif %}
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <div>
            <div style="font-size: 15px; font-weight: 600;">{{ playlist.name }}</div>
            <div style="font-size: 12px; color: var(--text-secondary);">{{ playlist.count }} tracks from {{ playlist.platform|capitalize }}</div>
        </div>
        <form hx-post="/import/tracks" hx-target="#import-result" hx-indicator="#import-spinner2">
            <input type="hidden" name="tracks" value="{{ playlist.tracks|join("\n") }}">
            <button type="submit" class="save-btn">‚¨á Import All to Queue</button>
        </form>
    </div>
    <div id="import-spinner2" class="loading htmx-indicator"><div class="spinner"></div></div>
    <div id="import-result"></div>
    <div style="max-height: 300px; overflow-y: auto; margin-top: 12px;">
        {% for track in playlist.tracks %}
        <div style="padding: 8px; border-bottom: 1px solid var(--border); font-size: 13px;">
            {{ loop.index }}. {{ track }}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
